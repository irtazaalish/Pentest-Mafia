#!/bin/bash

url=$1

if [ ! -d "$url" ];then
        mkdir $url
fi

if [ ! -d "$url/recon" ];then
        mkdir $url/recon
fi

echo "[+] Harvesting Sub-domains & Assets With Assetfinder..."
assetfinder $url >> $url/recon/assetfinder-assets.txt
cat $url/recon/assetfinder-assets.txt | grep $1 >> $url/recon/assetfinder-sub_domain.txt
cat $url/recon/assetfinder-sub_domain.txt >> $url/recon/final.txt

#rm $url/recon/assetfinder-assets.txt

#echo "[+] Harvesting Sub-domains With Amass..."

#amass enum -d $url >> $url/recon/amass.txt
#sort -u $url/recon/amass >> $url/recon/amass-final.txt
#cat $url/recon/amass-final.txt >> $url/recon/final.txt
##rm $url/recon/amass.txt


echo "[+] Probing For Alive Domains..."
cat $url/recon/final.txt | sort -u | httprobe | sed 's/http\/https\?"\/\///' | tr -d ': 443 : 80' >> $url/recon/alive.txt

