# Pentesting Methodology

What is a methodology and why is it needed?

Methodology is an established process generally followed by professional penetration tester to understand and exploit their targets. It is important because it ensures that there is consistency between how assessments are performed throughout the industry, and is the methodology that drives assessments.

## Methodology Overview

The Process that pentesters follow is summarized in the following steps:

- Reconnaissance
- Enumeration/Scanning
- Gaining Access
- Privilege Escalation
- Covering Tracks
- Reporting

## Reconnaissance Overview

Reconnaissance is the first step in the Ethical Hacker Methodology.
The goal of reconnaissance is to gather information about your target.
Interaction with the target(s) or system is usually not a part of reconnaissance stage.
Consider what tools we can use on the internet to obtain information about people. Reconnaissance is a fairly straightforward notion.

Google is an incredibly useful tool.
some more very simple and valid tools reconnaissance tools.
Wikipedia to understand the history of a company if there, use the company's Twitter/YouTube to see their latest news releases or "sizzle-reels", or even LinkedIn profile to research open company positions and/or the company's organizational structure.

There are some specialized tools that we can utilize but for this introduction, it is good to know the following tools.

- Google (specifically Google Dorking)
- Wikipedia
- PeopleFinder.com
- who.is
- sublist3r
- hunter.io
- builtwith.com
- wappalyzer

Even though it may seem simple, reconnaissance is the single most important phase of a penetration test.

## Enumeration and Scanning Overview

Scanning and Enumeration is the second stage of the Hacker Methodology.
A hacker will begin interacting with the target (scanning and enumerating) in order to uncover vulnerabilities associated to the target.
Nmap, dirb, metasploit, exploit-db, Burp Suite, and other tools are particularly useful for finding vulnerabilities in a target.
The attacker interacts with the target at this phase to determine its total attack surface.
In the Exploitation phase, the attack surface indicates what the target might be vulnerable to.
These vulnerabilities could be anything from a webpage that isn't adequately secured, a website that leaks information, SQL Injection, Cross Site Scripting, or any number of other issues.

To simplify - the enumeration and scanning phase is where we will try to determine WHAT the target might be vulnerable to.

Here is a quick sampling of other tools that you can learn on TryHackMe:

- dirb (used to find commonly-named directories on a website
- dirbuster (similar to dirb but with a user interface)
- enum4linux (tool used specifically for Linux to find vulnerabilities)
- metasploit (this tool is mostly used for exploitation, but it also has some built-in enumeration tools)
- Burp Suite (this tool can be used to scan a website for subdirectories and to intercept network traffic)

## Exploitation

After discussing the previous three phases of a pentest, it's time to discuss the one that is frequently viewed as "the coolest; Exploitation."
The exploitation phase can only be as good as the recon and enumeration phases that came before it; if you didn't enumerate all vulnerabilities, you might lose an opportunity, or if you didn't look hard enough at the target, the exploit you choose might fail.
Metasploit is a popular exploitation tool that comes with a number of built-in scripts to help make things simple.
To exploit online applications, you can utilise tools like Burp Suite and SQLMap.
There are numerous tools available, including msfvenom (for creating custom payloads), BeEF (browser-based exploitation), and many more.

## Privilege Escalation

The following step is to escalate privileges to a higher user account after we have gotten access to a victim machine via the exploitation phase.
As a pentester, we strive to reach the following accounts:

- The target account in Windows is often: Administrator or System.
- The target account in the Linux world is usually root.

Determining what Operating System a device runs on is critical in determining how we will raise our privileges in the future.
We'll try to run another exploit or find a means to become root or administrator once we've gained access as a lower-level user.

Privilege escalation can take many different forms. Here are a few examples:

- Cracking password hashes found on the target
- Finding a weak service or version of a service that will allow you to escalate privilege through the service
- Password spraying of previously discovered credentials (password re-use)
- Using the system's default credentials
- Locating secret keys or SSH keys on a device that will allow pivoting to a different system.
- Executing scripts or commands to enumerate system settings, such as 'ifconfig' to identify network settings or 'find / -perm -4000 -type f 2>/dev/null' to see if the user has root access to any commands.

## Covering Tracks

The majority of professional penetration testers will never need to "cover their tracks."Nevertheless, the methodology still includes it.
Any penetration test should always have clear consent from the system owner regarding when the test is conducted, how it is conducted, and the scope of targets.
Because the rules of engagement for a penetration test should be agreed upon before the test begins, the penetration tester should terminate the test IMMEDIATELY after privilege escalation has been achieved and report the findings to the client.
As a result, a professional will never hide their traces because the evaluation was planned and agreed upon ahead of time.
However, just because you don't cover your tracks it doesn't excuse you of responsibility for the exploitation.
Frequently, you will be asked to assist the IT Administrator or system owner in cleaning up the exploit code that you used, as well as advising on how to prevent future attacks.
While ethical hackers rarely need to hide their traces, you should keep track of and document all of the operations you completed as part of the penetration test so that you may help the system owner fix the vulnerabilities and recommend solutions.

## Reporting

The final phase of the pentest methodology is the reporting phase.
This is one of the most important phases where you will outline everything that you found. The reporting phase often includes the following things:

- The Finding(s) or Vulnerabilities
- The CRITICALITY of the Finding
- A description or brief overview of how the finding was discovered
- Remediation recommendations to resolve the finding

The amount of reporting documentation varies widely by the type of engagement that the pentester is involved in. A findings report generally goes in three formats:

- Vulnerability scan results (a simple listing of vulnerabilities)
- Findings summary (list of the findings as outlined above)
- Full formal report.

As stated before there are many varying levels of documentation for a final written report. Here is how each type of reporting would look in practice:

- A vulnerability report usually looks like this:
    List of all the systems found and identified on the network, highlighting any that have known vulnerabilities that may need attention.

- A findings summary is usually something like this:
    Finding: SQL Injection in ID Parameter of Cats Page
    Criticality: Critical
    Description: Placing a payload of 1' OR '1'='1 into the ID parameter of the website allowed the viewing of all cat names in the cat Table of the database. Furthermore, a UNION SELECT SQL statement allowed the attacker to view all usernames and passwords stored in the Accounts table.
    Remediation Recommendation: Utilize a Prepared SQL statement to prevent SQL injection attacks
- A full formal report sample can be found [here] by The Cyber Mentor: (<https://github.com/hmaverickadams/TCM-Security-Sample-Pentest-Report>).
